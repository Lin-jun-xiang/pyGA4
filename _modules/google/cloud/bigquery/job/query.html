<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>google.cloud.bigquery.job.query &mdash; pyga4 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../../_static/documentation_options.js?v=01f34227"></script>
        <script src="../../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            pyga4
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"></div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">pyga4</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">google.cloud.bigquery.job.query</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for google.cloud.bigquery.job.query</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2015 Google LLC</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>

<span class="sd">&quot;&quot;&quot;Classes for query jobs.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">concurrent.futures</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">typing</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">from</span> <span class="nn">google.api_core</span> <span class="kn">import</span> <span class="n">exceptions</span>
<span class="kn">from</span> <span class="nn">google.api_core.future</span> <span class="kn">import</span> <span class="n">polling</span> <span class="k">as</span> <span class="n">polling_future</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="kn">from</span> <span class="nn">google.cloud.bigquery.dataset</span> <span class="kn">import</span> <span class="n">Dataset</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.dataset</span> <span class="kn">import</span> <span class="n">DatasetListItem</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.dataset</span> <span class="kn">import</span> <span class="n">DatasetReference</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.encryption_configuration</span> <span class="kn">import</span> <span class="n">EncryptionConfiguration</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.enums</span> <span class="kn">import</span> <span class="n">KeyResultStatementKind</span><span class="p">,</span> <span class="n">DefaultPandasDTypes</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.external_config</span> <span class="kn">import</span> <span class="n">ExternalConfig</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery</span> <span class="kn">import</span> <span class="n">_helpers</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.query</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">_query_param_from_api_repr</span><span class="p">,</span>
    <span class="n">ArrayQueryParameter</span><span class="p">,</span>
    <span class="n">ConnectionProperty</span><span class="p">,</span>
    <span class="n">ScalarQueryParameter</span><span class="p">,</span>
    <span class="n">StructQueryParameter</span><span class="p">,</span>
    <span class="n">UDFResource</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.retry</span> <span class="kn">import</span> <span class="n">DEFAULT_RETRY</span><span class="p">,</span> <span class="n">DEFAULT_JOB_RETRY</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.routine</span> <span class="kn">import</span> <span class="n">RoutineReference</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.schema</span> <span class="kn">import</span> <span class="n">SchemaField</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.table</span> <span class="kn">import</span> <span class="n">_EmptyRowIterator</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.table</span> <span class="kn">import</span> <span class="n">RangePartitioning</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.table</span> <span class="kn">import</span> <span class="n">_table_arg_to_table_ref</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.table</span> <span class="kn">import</span> <span class="n">TableReference</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.table</span> <span class="kn">import</span> <span class="n">TimePartitioning</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery._tqdm_helpers</span> <span class="kn">import</span> <span class="n">wait_for_query</span>

<span class="kn">from</span> <span class="nn">google.cloud.bigquery.job.base</span> <span class="kn">import</span> <span class="n">_AsyncJob</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.job.base</span> <span class="kn">import</span> <span class="n">_JobConfig</span>
<span class="kn">from</span> <span class="nn">google.cloud.bigquery.job.base</span> <span class="kn">import</span> <span class="n">_JobReference</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pandas</span>  <span class="c1"># type: ignore</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  <span class="c1"># pragma: NO COVER</span>
    <span class="n">pandas</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">db_dtypes</span>  <span class="c1"># type: ignore</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  <span class="c1"># pragma: NO COVER</span>
    <span class="n">db_dtypes</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">if</span> <span class="n">typing</span><span class="o">.</span><span class="n">TYPE_CHECKING</span><span class="p">:</span>  <span class="c1"># pragma: NO COVER</span>
    <span class="c1"># Assumption: type checks are only used by library developers and CI environments</span>
    <span class="c1"># that have all optional dependencies installed, thus no conditional imports.</span>
    <span class="kn">import</span> <span class="nn">pandas</span>  <span class="c1"># type: ignore</span>
    <span class="kn">import</span> <span class="nn">geopandas</span>  <span class="c1"># type: ignore</span>
    <span class="kn">import</span> <span class="nn">pyarrow</span>  <span class="c1"># type: ignore</span>
    <span class="kn">from</span> <span class="nn">google.api_core</span> <span class="kn">import</span> <span class="n">retry</span> <span class="k">as</span> <span class="n">retries</span>
    <span class="kn">from</span> <span class="nn">google.cloud</span> <span class="kn">import</span> <span class="n">bigquery_storage</span>
    <span class="kn">from</span> <span class="nn">google.cloud.bigquery.client</span> <span class="kn">import</span> <span class="n">Client</span>
    <span class="kn">from</span> <span class="nn">google.cloud.bigquery.table</span> <span class="kn">import</span> <span class="n">RowIterator</span>


<span class="n">_CONTAINS_ORDER_BY</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;ORDER\s+BY&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
<span class="n">_EXCEPTION_FOOTER_TEMPLATE</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{message}</span><span class="se">\n\n</span><span class="s2">Location: </span><span class="si">{location}</span><span class="se">\n</span><span class="s2">Job ID: </span><span class="si">{job_id}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="n">_TIMEOUT_BUFFER_SECS</span> <span class="o">=</span> <span class="mf">0.1</span>


<span class="k">def</span> <span class="nf">_contains_order_by</span><span class="p">(</span><span class="n">query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do we need to preserve the order of the query results?</span>

<span class="sd">    This function has known false positives, such as with ordered window</span>
<span class="sd">    functions:</span>

<span class="sd">    .. code-block:: sql</span>

<span class="sd">       SELECT SUM(x) OVER (</span>
<span class="sd">           window_name</span>
<span class="sd">           PARTITION BY...</span>
<span class="sd">           ORDER BY...</span>
<span class="sd">           window_frame_clause)</span>
<span class="sd">       FROM ...</span>

<span class="sd">    This false positive failure case means the behavior will be correct, but</span>
<span class="sd">    downloading results with the BigQuery Storage API may be slower than it</span>
<span class="sd">    otherwise would. This is preferable to the false negative case, where</span>
<span class="sd">    results are expected to be in order but are not (due to parallel reads).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">query</span> <span class="ow">and</span> <span class="n">_CONTAINS_ORDER_BY</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_from_api_repr_query_parameters</span><span class="p">(</span><span class="n">resource</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">_query_param_from_api_repr</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span> <span class="k">for</span> <span class="n">mapping</span> <span class="ow">in</span> <span class="n">resource</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">_to_api_repr_query_parameters</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">query_parameter</span><span class="o">.</span><span class="n">to_api_repr</span><span class="p">()</span> <span class="k">for</span> <span class="n">query_parameter</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">_from_api_repr_udf_resources</span><span class="p">(</span><span class="n">resource</span><span class="p">):</span>
    <span class="n">udf_resources</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">udf_mapping</span> <span class="ow">in</span> <span class="n">resource</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">udf_type</span><span class="p">,</span> <span class="n">udf_value</span> <span class="ow">in</span> <span class="n">udf_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">udf_resources</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">UDFResource</span><span class="p">(</span><span class="n">udf_type</span><span class="p">,</span> <span class="n">udf_value</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">udf_resources</span>


<span class="k">def</span> <span class="nf">_to_api_repr_udf_resources</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[{</span><span class="n">udf_resource</span><span class="o">.</span><span class="n">udf_type</span><span class="p">:</span> <span class="n">udf_resource</span><span class="o">.</span><span class="n">value</span><span class="p">}</span> <span class="k">for</span> <span class="n">udf_resource</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">_from_api_repr_table_defs</span><span class="p">(</span><span class="n">resource</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">ExternalConfig</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">resource</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>


<span class="k">def</span> <span class="nf">_to_api_repr_table_defs</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">ExternalConfig</span><span class="o">.</span><span class="n">to_api_repr</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>


<span class="k">class</span> <span class="nc">BiEngineReason</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reason for BI Engine acceleration failure</span>

<span class="sd">    https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#bienginereason</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">code</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;CODE_UNSPECIFIED&quot;</span>

    <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_api_repr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">reason</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;BiEngineReason&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">reason</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;CODE_UNSPECIFIED&quot;</span><span class="p">),</span> <span class="n">reason</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">BiEngineStats</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Statistics for a BI Engine query</span>

<span class="sd">    https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#bienginestatistics</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ACCELERATION_MODE_UNSPECIFIED&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Specifies which mode of BI Engine acceleration was performed (if any)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">reasons</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BiEngineReason</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Contains explanatory messages in case of DISABLED / PARTIAL acceleration</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_api_repr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">stats</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;BiEngineStats&quot;</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;biEngineMode&quot;</span><span class="p">,</span> <span class="s2">&quot;ACCELERATION_MODE_UNSPECIFIED&quot;</span><span class="p">)</span>
        <span class="n">reasons</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">BiEngineReason</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;biEngineReasons&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">reasons</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">DmlStats</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Detailed statistics for DML statements.</span>

<span class="sd">    https://cloud.google.com/bigquery/docs/reference/rest/v2/DmlStats</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">inserted_row_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Number of inserted rows. Populated by DML INSERT and MERGE statements.&quot;&quot;&quot;</span>

    <span class="n">deleted_row_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Number of deleted rows. populated by DML DELETE, MERGE and TRUNCATE statements.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">updated_row_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Number of updated rows. Populated by DML UPDATE and MERGE statements.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_api_repr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">stats</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;DmlStats&quot;</span><span class="p">:</span>
        <span class="c1"># NOTE: The field order here must match the order of fields set at the</span>
        <span class="c1"># class level.</span>
        <span class="n">api_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;insertedRowCount&quot;</span><span class="p">,</span> <span class="s2">&quot;deletedRowCount&quot;</span><span class="p">,</span> <span class="s2">&quot;updatedRowCount&quot;</span><span class="p">)</span>

        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">api_field</span><span class="p">,</span> <span class="n">default_val</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">api_field</span><span class="p">,</span> <span class="n">default_val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">api_fields</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__new__</span><span class="o">.</span><span class="vm">__defaults__</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ScriptOptions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Options controlling the execution of scripts.</span>

<span class="sd">    https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#ScriptOptions</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">statement_timeout_ms</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">statement_byte_budget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">key_result_statement</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">KeyResultStatementKind</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statement_timeout_ms</span> <span class="o">=</span> <span class="n">statement_timeout_ms</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statement_byte_budget</span> <span class="o">=</span> <span class="n">statement_byte_budget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key_result_statement</span> <span class="o">=</span> <span class="n">key_result_statement</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_api_repr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;ScriptOptions&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Factory: construct instance from the JSON repr.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource(Dict[str: Any]):</span>
<span class="sd">                ScriptOptions representation returned from API.</span>

<span class="sd">        Returns:</span>
<span class="sd">            google.cloud.bigquery.ScriptOptions:</span>
<span class="sd">                ScriptOptions sample parsed from ``resource``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="n">entry</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">entry</span>

    <span class="k">def</span> <span class="nf">to_api_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Construct the API resource representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">statement_timeout_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Timeout period for each statement in a script.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;statementTimeoutMs&quot;</span><span class="p">))</span>

    <span class="nd">@statement_timeout_ms</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">statement_timeout_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]):</span>
        <span class="n">new_value</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="s2">&quot;statementTimeoutMs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">statement_byte_budget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Limit on the number of bytes billed per statement.</span>

<span class="sd">        Exceeding this budget results in an error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;statementByteBudget&quot;</span><span class="p">))</span>

    <span class="nd">@statement_byte_budget</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">statement_byte_budget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]):</span>
        <span class="n">new_value</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="s2">&quot;statementByteBudget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">key_result_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">KeyResultStatementKind</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determines which statement in the script represents the &quot;key result&quot;.</span>

<span class="sd">        This is used to populate the schema and query results of the script job.</span>
<span class="sd">        Default is ``KeyResultStatementKind.LAST``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;keyResultStatement&quot;</span><span class="p">)</span>

    <span class="nd">@key_result_statement</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">key_result_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">KeyResultStatementKind</span><span class="p">,</span> <span class="kc">None</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="s2">&quot;keyResultStatement&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>


<span class="k">class</span> <span class="nc">QueryJobConfig</span><span class="p">(</span><span class="n">_JobConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration options for query jobs.</span>

<span class="sd">    All properties in this class are optional. Values which are :data:`None` -&gt;</span>
<span class="sd">    server defaults. Set properties on the constructed configuration by using</span>
<span class="sd">    the property name as the name of a keyword argument.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">QueryJobConfig</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">destination_encryption_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;google.cloud.bigquery.encryption_configuration.EncryptionConfiguration: Custom</span>
<span class="sd">        encryption configuration for the destination table.</span>

<span class="sd">        Custom encryption configuration (e.g., Cloud KMS keys) or :data:`None`</span>
<span class="sd">        if using default encryption.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.destination_encryption_configuration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;destinationEncryptionConfiguration&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">EncryptionConfiguration</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prop</span>

    <span class="nd">@destination_encryption_configuration</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">destination_encryption_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">api_repr</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">api_repr</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">to_api_repr</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;destinationEncryptionConfiguration&quot;</span><span class="p">,</span> <span class="n">api_repr</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">allow_large_results</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;bool: Allow large query results tables (legacy SQL, only)</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.allow_large_results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;allowLargeResults&quot;</span><span class="p">)</span>

    <span class="nd">@allow_large_results</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">allow_large_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;allowLargeResults&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">connection_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ConnectionProperty</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Connection properties.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.connection_properties</span>

<span class="sd">        .. versionadded:: 2.29.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;connectionProperties&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">ConnectionProperty</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">resource</span><span class="p">]</span>

    <span class="nd">@connection_properties</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">connection_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ConnectionProperty</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span>
            <span class="s2">&quot;connectionProperties&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="n">prop</span><span class="o">.</span><span class="n">to_api_repr</span><span class="p">()</span> <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">value</span><span class="p">],</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">create_disposition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;google.cloud.bigquery.job.CreateDisposition: Specifies behavior</span>
<span class="sd">        for creating tables.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.create_disposition</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;createDisposition&quot;</span><span class="p">)</span>

    <span class="nd">@create_disposition</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">create_disposition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;createDisposition&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">create_session</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;[Preview] If :data:`True`, creates a new session, where</span>
<span class="sd">        :attr:`~google.cloud.bigquery.job.QueryJob.session_info` will contain a</span>
<span class="sd">        random server generated session id.</span>

<span class="sd">        If :data:`False`, runs query with an existing ``session_id`` passed in</span>
<span class="sd">        :attr:`~google.cloud.bigquery.job.QueryJobConfig.connection_properties`,</span>
<span class="sd">        otherwise runs query in non-session mode.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.create_session</span>

<span class="sd">        .. versionadded:: 2.29.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;createSession&quot;</span><span class="p">)</span>

    <span class="nd">@create_session</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">create_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;createSession&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;google.cloud.bigquery.dataset.DatasetReference: the default dataset</span>
<span class="sd">        to use for unqualified table names in the query or :data:`None` if not</span>
<span class="sd">        set.</span>

<span class="sd">        The ``default_dataset`` setter accepts:</span>

<span class="sd">        - a :class:`~google.cloud.bigquery.dataset.Dataset`, or</span>
<span class="sd">        - a :class:`~google.cloud.bigquery.dataset.DatasetReference`, or</span>
<span class="sd">        - a :class:`str` of the fully-qualified dataset ID in standard SQL</span>
<span class="sd">          format. The value must included a project ID and dataset ID</span>
<span class="sd">          separated by ``.``. For example: ``your-project.your_dataset``.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.default_dataset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;defaultDataset&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">DatasetReference</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prop</span>

    <span class="nd">@default_dataset</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">default_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;defaultDataset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">DatasetReference</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">DatasetListItem</span><span class="p">)):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">reference</span>

        <span class="n">resource</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">to_api_repr</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;defaultDataset&quot;</span><span class="p">,</span> <span class="n">resource</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">destination</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;google.cloud.bigquery.table.TableReference: table where results are</span>
<span class="sd">        written or :data:`None` if not set.</span>

<span class="sd">        The ``destination`` setter accepts:</span>

<span class="sd">        - a :class:`~google.cloud.bigquery.table.Table`, or</span>
<span class="sd">        - a :class:`~google.cloud.bigquery.table.TableReference`, or</span>
<span class="sd">        - a :class:`str` of the fully-qualified table ID in standard SQL</span>
<span class="sd">          format. The value must included a project ID, dataset ID, and table</span>
<span class="sd">          ID, each separated by ``.``. For example:</span>
<span class="sd">          ``your-project.your_dataset.your_table``.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.destination_table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;destinationTable&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">TableReference</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prop</span>

    <span class="nd">@destination</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">destination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;destinationTable&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">_table_arg_to_table_ref</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">resource</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">to_api_repr</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;destinationTable&quot;</span><span class="p">,</span> <span class="n">resource</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dry_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;bool: :data:`True` if this query should be a dry run to estimate</span>
<span class="sd">        costs.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfiguration.FIELDS.dry_run</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dryRun&quot;</span><span class="p">)</span>

    <span class="nd">@dry_run</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">dry_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="s2">&quot;dryRun&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">flatten_results</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;bool: Flatten nested/repeated fields in results. (Legacy SQL only)</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.flatten_results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;flattenResults&quot;</span><span class="p">)</span>

    <span class="nd">@flatten_results</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">flatten_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;flattenResults&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maximum_billing_tier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;int: Deprecated. Changes the billing tier to allow high-compute</span>
<span class="sd">        queries.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.maximum_billing_tier</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;maximumBillingTier&quot;</span><span class="p">)</span>

    <span class="nd">@maximum_billing_tier</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">maximum_billing_tier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;maximumBillingTier&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maximum_bytes_billed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;int: Maximum bytes to be billed for this job or :data:`None` if not set.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.maximum_bytes_billed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;maximumBytesBilled&quot;</span><span class="p">))</span>

    <span class="nd">@maximum_bytes_billed</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">maximum_bytes_billed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;maximumBytesBilled&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">priority</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;google.cloud.bigquery.job.QueryPriority: Priority of the query.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.priority</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;priority&quot;</span><span class="p">)</span>

    <span class="nd">@priority</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">priority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;priority&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">query_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List[Union[google.cloud.bigquery.query.ArrayQueryParameter, \</span>
<span class="sd">        google.cloud.bigquery.query.ScalarQueryParameter, \</span>
<span class="sd">        google.cloud.bigquery.query.StructQueryParameter]]: list of parameters</span>
<span class="sd">        for parameterized query (empty by default)</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.query_parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;queryParameters&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[])</span>
        <span class="k">return</span> <span class="n">_from_api_repr_query_parameters</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>

    <span class="nd">@query_parameters</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">query_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;queryParameters&quot;</span><span class="p">,</span> <span class="n">_to_api_repr_query_parameters</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">range_partitioning</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[google.cloud.bigquery.table.RangePartitioning]:</span>
<span class="sd">        Configures range-based partitioning for destination table.</span>

<span class="sd">        .. note::</span>
<span class="sd">            **Beta**. The integer range partitioning feature is in a</span>
<span class="sd">            pre-release state and might change or have limited support.</span>

<span class="sd">        Only specify at most one of</span>
<span class="sd">        :attr:`~google.cloud.bigquery.job.LoadJobConfig.time_partitioning` or</span>
<span class="sd">        :attr:`~google.cloud.bigquery.job.LoadJobConfig.range_partitioning`.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the value is not</span>
<span class="sd">                :class:`~google.cloud.bigquery.table.RangePartitioning` or</span>
<span class="sd">                :data:`None`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;rangePartitioning&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">resource</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RangePartitioning</span><span class="p">(</span><span class="n">_properties</span><span class="o">=</span><span class="n">resource</span><span class="p">)</span>

    <span class="nd">@range_partitioning</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">range_partitioning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">resource</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">RangePartitioning</span><span class="p">):</span>
            <span class="n">resource</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">_properties</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Expected value to be RangePartitioning or None, got </span><span class="si">{}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;rangePartitioning&quot;</span><span class="p">,</span> <span class="n">resource</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">udf_resources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List[google.cloud.bigquery.query.UDFResource]: user</span>
<span class="sd">        defined function resources (empty by default)</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.user_defined_function_resources</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;userDefinedFunctionResources&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[])</span>
        <span class="k">return</span> <span class="n">_from_api_repr_udf_resources</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>

    <span class="nd">@udf_resources</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">udf_resources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span>
            <span class="s2">&quot;userDefinedFunctionResources&quot;</span><span class="p">,</span> <span class="n">_to_api_repr_udf_resources</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">use_legacy_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;bool: Use legacy SQL syntax.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.use_legacy_sql</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;useLegacySql&quot;</span><span class="p">)</span>

    <span class="nd">@use_legacy_sql</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">use_legacy_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;useLegacySql&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">use_query_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;bool: Look for the query result in the cache.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.use_query_cache</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;useQueryCache&quot;</span><span class="p">)</span>

    <span class="nd">@use_query_cache</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">use_query_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;useQueryCache&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">write_disposition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;google.cloud.bigquery.job.WriteDisposition: Action that occurs if</span>
<span class="sd">        the destination table already exists.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.write_disposition</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;writeDisposition&quot;</span><span class="p">)</span>

    <span class="nd">@write_disposition</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">write_disposition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;writeDisposition&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">table_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dict[str, google.cloud.bigquery.external_config.ExternalConfig]:</span>
<span class="sd">        Definitions for external tables or :data:`None` if not set.</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.external_table_definitions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;tableDefinitions&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">_from_api_repr_table_defs</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prop</span>

    <span class="nd">@table_definitions</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">table_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;tableDefinitions&quot;</span><span class="p">,</span> <span class="n">_to_api_repr_table_defs</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time_partitioning</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[google.cloud.bigquery.table.TimePartitioning]: Specifies</span>
<span class="sd">        time-based partitioning for the destination table.</span>

<span class="sd">        Only specify at most one of</span>
<span class="sd">        :attr:`~google.cloud.bigquery.job.LoadJobConfig.time_partitioning` or</span>
<span class="sd">        :attr:`~google.cloud.bigquery.job.LoadJobConfig.range_partitioning`.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the value is not</span>
<span class="sd">                :class:`~google.cloud.bigquery.table.TimePartitioning` or</span>
<span class="sd">                :data:`None`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;timePartitioning&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">TimePartitioning</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prop</span>

    <span class="nd">@time_partitioning</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">time_partitioning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">api_repr</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">api_repr</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">to_api_repr</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;timePartitioning&quot;</span><span class="p">,</span> <span class="n">api_repr</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clustering_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[List[str]]: Fields defining clustering for the table</span>

<span class="sd">        (Defaults to :data:`None`).</span>

<span class="sd">        Clustering fields are immutable after table creation.</span>

<span class="sd">        .. note::</span>

<span class="sd">           BigQuery supports clustering for both partitioned and</span>
<span class="sd">           non-partitioned tables.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;clustering&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">,</span> <span class="p">()))</span>

    <span class="nd">@clustering_fields</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">clustering_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[List[str]]: Fields defining clustering for the table</span>

<span class="sd">        (Defaults to :data:`None`).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;clustering&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_del_sub_prop</span><span class="p">(</span><span class="s2">&quot;clustering&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">schema_update_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List[google.cloud.bigquery.job.SchemaUpdateOption]: Specifies</span>
<span class="sd">        updates to the destination table schema to allow as a side effect of</span>
<span class="sd">        the query job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;schemaUpdateOptions&quot;</span><span class="p">)</span>

    <span class="nd">@schema_update_options</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">schema_update_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;schemaUpdateOptions&quot;</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">script_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ScriptOptions</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Options controlling the execution of scripts.</span>

<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#scriptoptions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span><span class="s2">&quot;scriptOptions&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">ScriptOptions</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prop</span>

    <span class="nd">@script_options</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">script_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ScriptOptions</span><span class="p">,</span> <span class="kc">None</span><span class="p">]):</span>
        <span class="n">new_value</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">value</span><span class="o">.</span><span class="n">to_api_repr</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span><span class="s2">&quot;scriptOptions&quot;</span><span class="p">,</span> <span class="n">new_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_api_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build an API representation of the query job config.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict: A dictionary in the format used by the BigQuery API.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resource</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">)</span>

        <span class="c1"># Query parameters have an addition property associated with them</span>
        <span class="c1"># to indicate if the query is using named or positional parameters.</span>
        <span class="n">query_parameters</span> <span class="o">=</span> <span class="n">resource</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;queryParameters&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">query_parameters</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">query_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">resource</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;parameterMode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;POSITIONAL&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">resource</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;parameterMode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;NAMED&quot;</span>

        <span class="k">return</span> <span class="n">resource</span>


<span class="k">class</span> <span class="nc">QueryJob</span><span class="p">(</span><span class="n">_AsyncJob</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Asynchronous job: query tables.</span>

<span class="sd">    Args:</span>
<span class="sd">        job_id (str): the job&#39;s ID, within the project belonging to ``client``.</span>

<span class="sd">        query (str): SQL query string.</span>

<span class="sd">        client (google.cloud.bigquery.client.Client):</span>
<span class="sd">            A client which holds credentials and project configuration</span>
<span class="sd">            for the dataset (which requires a project).</span>

<span class="sd">        job_config (Optional[google.cloud.bigquery.job.QueryJobConfig]):</span>
<span class="sd">            Extra configuration options for the query job.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_JOB_TYPE</span> <span class="o">=</span> <span class="s2">&quot;query&quot;</span>
    <span class="n">_UDF_KEY</span> <span class="o">=</span> <span class="s2">&quot;userDefinedFunctionResources&quot;</span>
    <span class="n">_CONFIG_CLASS</span> <span class="o">=</span> <span class="n">QueryJobConfig</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">job_config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">QueryJob</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">job_id</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">job_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="s2">&quot;configuration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_config</span><span class="o">.</span><span class="n">_properties</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">use_legacy_sql</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">use_legacy_sql</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">query</span><span class="p">:</span>
            <span class="n">_helpers</span><span class="o">.</span><span class="n">_set_sub_prop</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;configuration&quot;</span><span class="p">,</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="s2">&quot;query&quot;</span><span class="p">],</span> <span class="n">query</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_query_results</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_done_timeout</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transport_timeout</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">allow_large_results</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.allow_large_results`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">allow_large_results</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QueryJobConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The configuration for this query job.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">typing</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">QueryJobConfig</span><span class="p">,</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">configuration</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">connection_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ConnectionProperty</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.connection_properties`.</span>

<span class="sd">        .. versionadded:: 2.29.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">connection_properties</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">create_disposition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.create_disposition`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">create_disposition</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">create_session</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.create_session`.</span>

<span class="sd">        .. versionadded:: 2.29.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">create_session</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.default_dataset`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">default_dataset</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">destination</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.destination`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">destination</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">destination_encryption_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;google.cloud.bigquery.encryption_configuration.EncryptionConfiguration: Custom</span>
<span class="sd">        encryption configuration for the destination table.</span>

<span class="sd">        Custom encryption configuration (e.g., Cloud KMS keys) or :data:`None`</span>
<span class="sd">        if using default encryption.</span>

<span class="sd">        See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.destination_encryption_configuration`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">destination_encryption_configuration</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dry_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.dry_run`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">dry_run</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">flatten_results</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.flatten_results`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">flatten_results</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">priority</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.priority`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">priority</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;str: The query text used in this query job.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationQuery.FIELDS.query</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_get_sub_prop</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;configuration&quot;</span><span class="p">,</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="s2">&quot;query&quot;</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">query_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.query_parameters`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">query_parameters</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">udf_resources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.udf_resources`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">udf_resources</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">use_legacy_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.use_legacy_sql`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">use_legacy_sql</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">use_query_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.use_query_cache`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">use_query_cache</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">write_disposition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.write_disposition`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">write_disposition</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maximum_billing_tier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.maximum_billing_tier`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">maximum_billing_tier</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maximum_bytes_billed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.maximum_bytes_billed`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">maximum_bytes_billed</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">range_partitioning</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.range_partitioning`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">range_partitioning</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">table_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.table_definitions`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">table_definitions</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time_partitioning</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.time_partitioning`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">time_partitioning</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clustering_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.clustering_fields`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">clustering_fields</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">schema_update_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See</span>
<span class="sd">        :attr:`google.cloud.bigquery.job.QueryJobConfig.schema_update_options`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">schema_update_options</span>

    <span class="k">def</span> <span class="nf">to_api_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a resource for :meth:`_begin`.&quot;&quot;&quot;</span>
        <span class="c1"># Use to_api_repr to allow for some configuration properties to be set</span>
        <span class="c1"># automatically.</span>
        <span class="n">configuration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">to_api_repr</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;jobReference&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="s2">&quot;jobReference&quot;</span><span class="p">],</span>
            <span class="s2">&quot;configuration&quot;</span><span class="p">:</span> <span class="n">configuration</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_api_repr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="s2">&quot;Client&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QueryJob&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Factory:  construct a job given its API representation</span>

<span class="sd">        Args:</span>
<span class="sd">            resource (Dict): dataset job representation returned from the API</span>

<span class="sd">            client (google.cloud.bigquery.client.Client):</span>
<span class="sd">                Client which holds credentials and project</span>
<span class="sd">                configuration for the dataset.</span>

<span class="sd">        Returns:</span>
<span class="sd">            google.cloud.bigquery.job.QueryJob: Job parsed from ``resource``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">job_ref_properties</span> <span class="o">=</span> <span class="n">resource</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
            <span class="s2">&quot;jobReference&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;projectId&quot;</span><span class="p">:</span> <span class="n">client</span><span class="o">.</span><span class="n">project</span><span class="p">,</span> <span class="s2">&quot;jobId&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="n">job_ref</span> <span class="o">=</span> <span class="n">_JobReference</span><span class="o">.</span><span class="n">_from_api_repr</span><span class="p">(</span><span class="n">job_ref_properties</span><span class="p">)</span>
        <span class="n">job</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">job_ref</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>
        <span class="n">job</span><span class="o">.</span><span class="n">_set_properties</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">job</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">query_plan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return query plan from job statistics, if present.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.query_plan</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[google.cloud.bigquery.job.QueryPlanEntry]:</span>
<span class="sd">                mappings describing the query plan, or an empty list</span>
<span class="sd">                if the query has not yet completed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">plan_entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;queryPlan&quot;</span><span class="p">,</span> <span class="p">())</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">QueryPlanEntry</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">plan_entries</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">SchemaField</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The schema of the results.</span>

<span class="sd">        Present only for successful dry run of non-legacy SQL queries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;schema&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">resource</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">resource</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">SchemaField</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">timeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List(TimelineEntry): Return the query execution timeline</span>
<span class="sd">        from job statistics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">raw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timeline&quot;</span><span class="p">,</span> <span class="p">())</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">TimelineEntry</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">raw</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">total_bytes_processed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return total bytes processed from job statistics, if present.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.total_bytes_processed</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[int]:</span>
<span class="sd">                Total bytes processed by the job, or None if job is not</span>
<span class="sd">                yet complete.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;totalBytesProcessed&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">total_bytes_billed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return total bytes billed from job statistics, if present.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.total_bytes_billed</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[int]:</span>
<span class="sd">                Total bytes processed by the job, or None if job is not</span>
<span class="sd">                yet complete.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;totalBytesBilled&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">billing_tier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return billing tier from job statistics, if present.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.billing_tier</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[int]:</span>
<span class="sd">                Billing tier used by the job, or None if job is not</span>
<span class="sd">                yet complete.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;billingTier&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cache_hit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return whether or not query results were served from cache.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.cache_hit</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[bool]:</span>
<span class="sd">                whether the query results were returned from cache, or None</span>
<span class="sd">                if job is not yet complete.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cacheHit&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ddl_operation_performed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[str]: Return the DDL operation performed.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.ddl_operation_performed</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ddlOperationPerformed&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ddl_target_routine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[google.cloud.bigquery.routine.RoutineReference]: Return the DDL target routine, present</span>
<span class="sd">            for CREATE/DROP FUNCTION/PROCEDURE  queries.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.ddl_target_routine</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ddlTargetRoutine&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">RoutineReference</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prop</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ddl_target_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[google.cloud.bigquery.table.TableReference]: Return the DDL target table, present</span>
<span class="sd">            for CREATE/DROP TABLE/VIEW queries.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.ddl_target_table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ddlTargetTable&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">TableReference</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prop</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">num_dml_affected_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the number of DML rows affected by the job.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.num_dml_affected_rows</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[int]:</span>
<span class="sd">                number of DML rows affected by the job, or None if job is not</span>
<span class="sd">                yet complete.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;numDmlAffectedRows&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">slot_millis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Union[int, None]: Slot-milliseconds used by this query job.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;totalSlotMs&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">statement_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return statement type from job statistics, if present.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.statement_type</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[str]:</span>
<span class="sd">                type of statement used by the job, or None if job is not</span>
<span class="sd">                yet complete.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;statementType&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">referenced_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return referenced tables from job statistics, if present.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.referenced_tables</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Dict]:</span>
<span class="sd">                mappings describing the query plan, or an empty list</span>
<span class="sd">                if the query has not yet completed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tables</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">datasets_by_project_name</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;referencedTables&quot;</span><span class="p">,</span> <span class="p">()):</span>

            <span class="n">t_project</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;projectId&quot;</span><span class="p">]</span>

            <span class="n">ds_id</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;datasetId&quot;</span><span class="p">]</span>
            <span class="n">t_dataset</span> <span class="o">=</span> <span class="n">datasets_by_project_name</span><span class="o">.</span><span class="n">get</span><span class="p">((</span><span class="n">t_project</span><span class="p">,</span> <span class="n">ds_id</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">t_dataset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">t_dataset</span> <span class="o">=</span> <span class="n">DatasetReference</span><span class="p">(</span><span class="n">t_project</span><span class="p">,</span> <span class="n">ds_id</span><span class="p">)</span>
                <span class="n">datasets_by_project_name</span><span class="p">[(</span><span class="n">t_project</span><span class="p">,</span> <span class="n">ds_id</span><span class="p">)]</span> <span class="o">=</span> <span class="n">t_dataset</span>

            <span class="n">t_name</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;tableId&quot;</span><span class="p">]</span>
            <span class="n">tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t_dataset</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">t_name</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">tables</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">undeclared_query_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return undeclared query parameters from job statistics, if present.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.undeclared_query_parameters</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Union[ \</span>
<span class="sd">                google.cloud.bigquery.query.ArrayQueryParameter, \</span>
<span class="sd">                google.cloud.bigquery.query.ScalarQueryParameter, \</span>
<span class="sd">                google.cloud.bigquery.query.StructQueryParameter \</span>
<span class="sd">            ]]:</span>
<span class="sd">                Undeclared parameters, or an empty list if the query has</span>
<span class="sd">                not yet completed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">undeclared</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;undeclaredQueryParameters&quot;</span><span class="p">,</span> <span class="p">())</span>

        <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="n">undeclared</span><span class="p">:</span>
            <span class="n">p_type</span> <span class="o">=</span> <span class="n">parameter</span><span class="p">[</span><span class="s2">&quot;parameterType&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot;arrayType&quot;</span> <span class="ow">in</span> <span class="n">p_type</span><span class="p">:</span>
                <span class="n">klass</span> <span class="o">=</span> <span class="n">ArrayQueryParameter</span>
            <span class="k">elif</span> <span class="s2">&quot;structTypes&quot;</span> <span class="ow">in</span> <span class="n">p_type</span><span class="p">:</span>
                <span class="n">klass</span> <span class="o">=</span> <span class="n">StructQueryParameter</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">klass</span> <span class="o">=</span> <span class="n">ScalarQueryParameter</span>

            <span class="n">parameters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">klass</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">parameter</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">parameters</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">estimated_bytes_processed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the estimated number of bytes processed by the query.</span>

<span class="sd">        See:</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobStatistics2.FIELDS.estimated_bytes_processed</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[int]:</span>
<span class="sd">                number of DML rows affected by the job, or None if job is not</span>
<span class="sd">                yet complete.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;estimatedBytesProcessed&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dml_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DmlStats</span><span class="p">]:</span>
        <span class="n">stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dmlStats&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">stats</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DmlStats</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">stats</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bi_engine_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BiEngineStats</span><span class="p">]:</span>
        <span class="n">stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_statistics</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;biEngineStatistics&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">stats</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">BiEngineStats</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">stats</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_blocking_poll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_done_timeout</span> <span class="o">=</span> <span class="n">timeout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transport_timeout</span> <span class="o">=</span> <span class="n">timeout</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">QueryJob</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_blocking_poll</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_format_for_exception</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format a query for the output in exception message.</span>

<span class="sd">        Args:</span>
<span class="sd">            message (str): The original exception message.</span>
<span class="sd">            query (str): The SQL query to format.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: A formatted query text.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{message}</span><span class="se">\n\n</span><span class="si">{header}</span><span class="se">\n\n</span><span class="si">{ruler}</span><span class="se">\n</span><span class="si">{body}</span><span class="se">\n</span><span class="si">{ruler}</span><span class="s2">&quot;</span>

        <span class="n">lines</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span> <span class="k">if</span> <span class="n">query</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>
        <span class="n">max_line_len</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">)</span>

        <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;-----Query Job SQL Follows-----&quot;</span>
        <span class="n">header</span> <span class="o">=</span> <span class="s2">&quot;{:^</span><span class="si">{total_width}</span><span class="s2">}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">total_width</span><span class="o">=</span><span class="n">max_line_len</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Print out a &quot;ruler&quot; above and below the SQL so we can judge columns.</span>
        <span class="c1"># Left pad for the line numbers (4 digits plus &quot;:&quot;).</span>
        <span class="n">ruler</span> <span class="o">=</span> <span class="s2">&quot;    |&quot;</span> <span class="o">+</span> <span class="s2">&quot;    .    |&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">max_line_len</span> <span class="o">//</span> <span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Put line numbers next to the SQL.</span>
        <span class="n">body</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">{:4}</span><span class="s2">:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span> <span class="n">ruler</span><span class="o">=</span><span class="n">ruler</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_begin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retry</span><span class="o">=</span><span class="n">DEFAULT_RETRY</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;API call:  begin the job via a POST request</span>

<span class="sd">        See</span>
<span class="sd">        https://cloud.google.com/bigquery/docs/reference/rest/v2/jobs/insert</span>

<span class="sd">        Args:</span>
<span class="sd">            client (Optional[google.cloud.bigquery.client.Client]):</span>
<span class="sd">                The client to use. If not passed, falls back to the ``client``</span>
<span class="sd">                associated with the job object or``NoneType``.</span>
<span class="sd">            retry (Optional[google.api_core.retry.Retry]):</span>
<span class="sd">                How to retry the RPC.</span>
<span class="sd">            timeout (Optional[float]):</span>
<span class="sd">                The number of seconds to wait for the underlying HTTP transport</span>
<span class="sd">                before using ``retry``.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the job has already begun.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">QueryJob</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_begin</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span> <span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">GoogleAPICallError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">exc</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">_EXCEPTION_FOOTER_TEMPLATE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="n">exc</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="n">job_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span>
            <span class="p">)</span>
            <span class="n">exc</span><span class="o">.</span><span class="n">debug_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_for_exception</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
            <span class="n">exc</span><span class="o">.</span><span class="n">query_job</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">raise</span>

    <span class="k">def</span> <span class="nf">_reload_query_results</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">retry</span><span class="p">:</span> <span class="s2">&quot;retries.Retry&quot;</span> <span class="o">=</span> <span class="n">DEFAULT_RETRY</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Refresh the cached query results.</span>

<span class="sd">        Args:</span>
<span class="sd">            retry (Optional[google.api_core.retry.Retry]):</span>
<span class="sd">                How to retry the call that retrieves query results.</span>
<span class="sd">            timeout (Optional[float]):</span>
<span class="sd">                The number of seconds to wait for the underlying HTTP transport</span>
<span class="sd">                before using ``retry``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_results</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_results</span><span class="o">.</span><span class="n">complete</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># Since the API to getQueryResults can hang up to the timeout value</span>
        <span class="c1"># (default of 10 seconds), set the timeout parameter to ensure that</span>
        <span class="c1"># the timeout from the futures API is respected. See:</span>
        <span class="c1"># https://github.com/GoogleCloudPlatform/google-cloud-python/issues/4135</span>
        <span class="n">timeout_ms</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Python_API_core, as part of a major rewrite of the deadline, timeout,</span>
        <span class="c1"># retry process sets the timeout value as a Python object().</span>
        <span class="c1"># Our system does not natively handle that and instead expects</span>
        <span class="c1"># either none or a numeric value. If passed a Python object, convert to</span>
        <span class="c1"># None.</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_done_timeout</span><span class="p">)</span> <span class="o">==</span> <span class="nb">object</span><span class="p">:</span>  <span class="c1"># pragma: NO COVER</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_done_timeout</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_done_timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Subtract a buffer for context switching, network latency, etc.</span>
            <span class="n">api_timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_done_timeout</span> <span class="o">-</span> <span class="n">_TIMEOUT_BUFFER_SECS</span>
            <span class="n">api_timeout</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">api_timeout</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_done_timeout</span> <span class="o">-=</span> <span class="n">api_timeout</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_done_timeout</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_done_timeout</span><span class="p">)</span>
            <span class="n">timeout_ms</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">api_timeout</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

        <span class="c1"># If an explicit timeout is not given, fall back to the transport timeout</span>
        <span class="c1"># stored in _blocking_poll() in the process of polling for job completion.</span>
        <span class="n">transport_timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transport_timeout</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_query_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_get_query_results</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
            <span class="n">retry</span><span class="p">,</span>
            <span class="n">project</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="p">,</span>
            <span class="n">timeout_ms</span><span class="o">=</span><span class="n">timeout_ms</span><span class="p">,</span>
            <span class="n">location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">transport_timeout</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_done_or_raise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">retry</span><span class="o">=</span><span class="n">DEFAULT_RETRY</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the query has finished running and raise if it&#39;s not.</span>

<span class="sd">        If the query has finished, also reload the job itself.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If an explicit timeout is not given, fall back to the transport timeout</span>
        <span class="c1"># stored in _blocking_poll() in the process of polling for job completion.</span>
        <span class="n">transport_timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transport_timeout</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reload_query_results</span><span class="p">(</span><span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">transport_timeout</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">GoogleAPIError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="c1"># Reloading also updates error details on self, thus no need for an</span>
            <span class="c1"># explicit self.set_exception() call if reloading succeeds.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">transport_timeout</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">GoogleAPIError</span><span class="p">:</span>
                <span class="c1"># Use the query results reload exception, as it generally contains</span>
                <span class="c1"># much more useful error information.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_exception</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="k">return</span>

        <span class="c1"># Only reload the job once we know the query is complete.</span>
        <span class="c1"># This will ensure that fields such as the destination table are</span>
        <span class="c1"># correctly populated.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_results</span><span class="o">.</span><span class="n">complete</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">polling_future</span><span class="o">.</span><span class="n">_OperationNotComplete</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">transport_timeout</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">GoogleAPIError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_exception</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">result</span><span class="p">(</span>  <span class="c1"># type: ignore  # (complaints about the overloaded signature)</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_results</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">retry</span><span class="p">:</span> <span class="s2">&quot;retries.Retry&quot;</span> <span class="o">=</span> <span class="n">DEFAULT_RETRY</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">job_retry</span><span class="p">:</span> <span class="s2">&quot;retries.Retry&quot;</span> <span class="o">=</span> <span class="n">DEFAULT_JOB_RETRY</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;RowIterator&quot;</span><span class="p">,</span> <span class="n">_EmptyRowIterator</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the job and wait for it to complete and get the result.</span>

<span class="sd">        Args:</span>
<span class="sd">            page_size (Optional[int]):</span>
<span class="sd">                The maximum number of rows in each page of results from this</span>
<span class="sd">                request. Non-positive values are ignored.</span>
<span class="sd">            max_results (Optional[int]):</span>
<span class="sd">                The maximum total number of rows from this request.</span>
<span class="sd">            retry (Optional[google.api_core.retry.Retry]):</span>
<span class="sd">                How to retry the call that retrieves rows.  This only</span>
<span class="sd">                applies to making RPC calls.  It isn&#39;t used to retry</span>
<span class="sd">                failed jobs.  This has a reasonable default that</span>
<span class="sd">                should only be overridden with care. If the job state</span>
<span class="sd">                is ``DONE``, retrying is aborted early even if the</span>
<span class="sd">                results are not available, as this will not change</span>
<span class="sd">                anymore.</span>
<span class="sd">            timeout (Optional[float]):</span>
<span class="sd">                The number of seconds to wait for the underlying HTTP transport</span>
<span class="sd">                before using ``retry``.</span>
<span class="sd">                If multiple requests are made under the hood, ``timeout``</span>
<span class="sd">                applies to each individual request.</span>
<span class="sd">            start_index (Optional[int]):</span>
<span class="sd">                The zero-based index of the starting row to read.</span>
<span class="sd">            job_retry (Optional[google.api_core.retry.Retry]):</span>
<span class="sd">                How to retry failed jobs.  The default retries</span>
<span class="sd">                rate-limit-exceeded errors. Passing ``None`` disables</span>
<span class="sd">                job retry.</span>

<span class="sd">                Not all jobs can be retried.  If ``job_id`` was</span>
<span class="sd">                provided to the query that created this job, then the</span>
<span class="sd">                job returned by the query will not be retryable, and</span>
<span class="sd">                an exception will be raised if non-``None``</span>
<span class="sd">                non-default ``job_retry`` is also provided.</span>

<span class="sd">        Returns:</span>
<span class="sd">            google.cloud.bigquery.table.RowIterator:</span>
<span class="sd">                Iterator of row data</span>
<span class="sd">                :class:`~google.cloud.bigquery.table.Row`-s. During each</span>
<span class="sd">                page, the iterator will have the ``total_rows`` attribute</span>
<span class="sd">                set, which counts the total number of rows **in the result</span>
<span class="sd">                set** (this is distinct from the total number of rows in the</span>
<span class="sd">                current page: ``iterator.page.num_items``).</span>

<span class="sd">                If the query is a special query that produces no results, e.g.</span>
<span class="sd">                a DDL query, an ``_EmptyRowIterator`` instance is returned.</span>

<span class="sd">        Raises:</span>
<span class="sd">            google.cloud.exceptions.GoogleAPICallError:</span>
<span class="sd">                If the job failed and retries aren&#39;t successful.</span>
<span class="sd">            concurrent.futures.TimeoutError:</span>
<span class="sd">                If the job did not complete in the given timeout.</span>
<span class="sd">            TypeError:</span>
<span class="sd">                If Non-``None`` and non-default ``job_retry`` is</span>
<span class="sd">                provided and the job is not retryable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dry_run</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_EmptyRowIterator</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">retry_do_query</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_retry_do_query&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">retry_do_query</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">job_retry</span> <span class="ow">is</span> <span class="n">DEFAULT_JOB_RETRY</span><span class="p">:</span>
                    <span class="n">job_retry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_retry</span>  <span class="c1"># type: ignore</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">job_retry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">job_retry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">DEFAULT_JOB_RETRY</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                        <span class="s2">&quot;`job_retry` was provided, but this job is&quot;</span>
                        <span class="s2">&quot; not retryable, because a custom `job_id` was&quot;</span>
                        <span class="s2">&quot; provided to the query that created this job.&quot;</span>
                    <span class="p">)</span>

            <span class="n">first</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">def</span> <span class="nf">do_get_result</span><span class="p">():</span>
                <span class="k">nonlocal</span> <span class="n">first</span>

                <span class="k">if</span> <span class="n">first</span><span class="p">:</span>
                    <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Note that we won&#39;t get here if retry_do_query is</span>
                    <span class="c1"># None, because we won&#39;t use a retry.</span>

                    <span class="c1"># The orinal job is failed. Create a new one.</span>
                    <span class="n">job</span> <span class="o">=</span> <span class="n">retry_do_query</span><span class="p">()</span>

                    <span class="c1"># If it&#39;s already failed, we might as well stop:</span>
                    <span class="k">if</span> <span class="n">job</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="ow">and</span> <span class="n">job</span><span class="o">.</span><span class="n">exception</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">job</span><span class="o">.</span><span class="n">exception</span><span class="p">()</span>

                    <span class="c1"># Become the new job:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">job</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>

                    <span class="c1"># This shouldn&#39;t be necessary, because once we have a good</span>
                    <span class="c1"># job, it should stay good,and we shouldn&#39;t have to retry.</span>
                    <span class="c1"># But let&#39;s be paranoid. :)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_retry_do_query</span> <span class="o">=</span> <span class="n">retry_do_query</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_job_retry</span> <span class="o">=</span> <span class="n">job_retry</span>

                <span class="nb">super</span><span class="p">(</span><span class="n">QueryJob</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

                <span class="c1"># Since the job could already be &quot;done&quot; (e.g. got a finished job</span>
                <span class="c1"># via client.get_job), the superclass call to done() might not</span>
                <span class="c1"># set the self._query_results cache.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_reload_query_results</span><span class="p">(</span><span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">retry_do_query</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">job_retry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">do_get_result</span> <span class="o">=</span> <span class="n">job_retry</span><span class="p">(</span><span class="n">do_get_result</span><span class="p">)</span>

            <span class="n">do_get_result</span><span class="p">()</span>

        <span class="k">except</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">GoogleAPICallError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">exc</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">_EXCEPTION_FOOTER_TEMPLATE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="n">exc</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="n">job_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span>
            <span class="p">)</span>
            <span class="n">exc</span><span class="o">.</span><span class="n">debug_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_for_exception</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="n">exc</span><span class="o">.</span><span class="n">query_job</span> <span class="o">=</span> <span class="bp">self</span>  <span class="c1"># type: ignore</span>
            <span class="k">raise</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">Timeout</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">TimeoutError</span> <span class="kn">from</span> <span class="nn">exc</span>

        <span class="c1"># If the query job is complete but there are no query results, this was</span>
        <span class="c1"># special job, such as a DDL query. Return an empty result set to</span>
        <span class="c1"># indicate success and avoid calling tabledata.list on a table which</span>
        <span class="c1"># can&#39;t be read (such as a view table).</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_results</span><span class="o">.</span><span class="n">total_rows</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_EmptyRowIterator</span><span class="p">()</span>

        <span class="n">rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">_list_rows_from_query_results</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_query_results</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span>
            <span class="n">total_rows</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_query_results</span><span class="o">.</span><span class="n">total_rows</span><span class="p">,</span>
            <span class="n">destination</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">destination</span><span class="p">,</span>
            <span class="n">page_size</span><span class="o">=</span><span class="n">page_size</span><span class="p">,</span>
            <span class="n">max_results</span><span class="o">=</span><span class="n">max_results</span><span class="p">,</span>
            <span class="n">start_index</span><span class="o">=</span><span class="n">start_index</span><span class="p">,</span>
            <span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">rows</span><span class="o">.</span><span class="n">_preserve_order</span> <span class="o">=</span> <span class="n">_contains_order_by</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rows</span>

    <span class="c1"># If changing the signature of this method, make sure to apply the same</span>
    <span class="c1"># changes to table.RowIterator.to_arrow(), except for the max_results parameter</span>
    <span class="c1"># that should only exist here in the QueryJob method.</span>
    <span class="k">def</span> <span class="nf">to_arrow</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">progress_bar_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">bqstorage_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;bigquery_storage.BigQueryReadClient&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">create_bqstorage_client</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">max_results</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;pyarrow.Table&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;[Beta] Create a class:`pyarrow.Table` by loading all pages of a</span>
<span class="sd">        table or query.</span>

<span class="sd">        Args:</span>
<span class="sd">            progress_bar_type (Optional[str]):</span>
<span class="sd">                If set, use the `tqdm &lt;https://tqdm.github.io/&gt;`_ library to</span>
<span class="sd">                display a progress bar while the data downloads. Install the</span>
<span class="sd">                ``tqdm`` package to use this feature.</span>

<span class="sd">                Possible values of ``progress_bar_type`` include:</span>

<span class="sd">                ``None``</span>
<span class="sd">                  No progress bar.</span>
<span class="sd">                ``&#39;tqdm&#39;``</span>
<span class="sd">                  Use the :func:`tqdm.tqdm` function to print a progress bar</span>
<span class="sd">                  to :data:`sys.stdout`.</span>
<span class="sd">                ``&#39;tqdm_notebook&#39;``</span>
<span class="sd">                  Use the :func:`tqdm.notebook.tqdm` function to display a</span>
<span class="sd">                  progress bar as a Jupyter notebook widget.</span>
<span class="sd">                ``&#39;tqdm_gui&#39;``</span>
<span class="sd">                  Use the :func:`tqdm.tqdm_gui` function to display a</span>
<span class="sd">                  progress bar as a graphical dialog box.</span>
<span class="sd">            bqstorage_client (Optional[google.cloud.bigquery_storage_v1.BigQueryReadClient]):</span>
<span class="sd">                A BigQuery Storage API client. If supplied, use the faster</span>
<span class="sd">                BigQuery Storage API to fetch rows from BigQuery. This API</span>
<span class="sd">                is a billable API.</span>

<span class="sd">                This method requires ``google-cloud-bigquery-storage`` library.</span>

<span class="sd">                Reading from a specific partition or snapshot is not</span>
<span class="sd">                currently supported by this method.</span>
<span class="sd">            create_bqstorage_client (Optional[bool]):</span>
<span class="sd">                If ``True`` (default), create a BigQuery Storage API client</span>
<span class="sd">                using the default API settings. The BigQuery Storage API</span>
<span class="sd">                is a faster way to fetch rows from BigQuery. See the</span>
<span class="sd">                ``bqstorage_client`` parameter for more information.</span>

<span class="sd">                This argument does nothing if ``bqstorage_client`` is supplied.</span>

<span class="sd">                .. versionadded:: 1.24.0</span>

<span class="sd">            max_results (Optional[int]):</span>
<span class="sd">                Maximum number of rows to include in the result. No limit by default.</span>

<span class="sd">                .. versionadded:: 2.21.0</span>

<span class="sd">        Returns:</span>
<span class="sd">            pyarrow.Table</span>
<span class="sd">                A :class:`pyarrow.Table` populated with row data and column</span>
<span class="sd">                headers from the query results. The column headers are derived</span>
<span class="sd">                from the destination table&#39;s schema.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the :mod:`pyarrow` library cannot be imported.</span>

<span class="sd">        .. versionadded:: 1.17.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query_result</span> <span class="o">=</span> <span class="n">wait_for_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_bar_type</span><span class="p">,</span> <span class="n">max_results</span><span class="o">=</span><span class="n">max_results</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">query_result</span><span class="o">.</span><span class="n">to_arrow</span><span class="p">(</span>
            <span class="n">progress_bar_type</span><span class="o">=</span><span class="n">progress_bar_type</span><span class="p">,</span>
            <span class="n">bqstorage_client</span><span class="o">=</span><span class="n">bqstorage_client</span><span class="p">,</span>
            <span class="n">create_bqstorage_client</span><span class="o">=</span><span class="n">create_bqstorage_client</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># If changing the signature of this method, make sure to apply the same</span>
    <span class="c1"># changes to table.RowIterator.to_dataframe(), except for the max_results parameter</span>
    <span class="c1"># that should only exist here in the QueryJob method.</span>
    <span class="k">def</span> <span class="nf">to_dataframe</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">bqstorage_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;bigquery_storage.BigQueryReadClient&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dtypes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">progress_bar_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">create_bqstorage_client</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">max_results</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geography_as_object</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">bool_dtype</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">DefaultPandasDTypes</span><span class="o">.</span><span class="n">BOOL_DTYPE</span><span class="p">,</span>
        <span class="n">int_dtype</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">DefaultPandasDTypes</span><span class="o">.</span><span class="n">INT_DTYPE</span><span class="p">,</span>
        <span class="n">float_dtype</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">string_dtype</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">date_dtype</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">DefaultPandasDTypes</span><span class="o">.</span><span class="n">DATE_DTYPE</span><span class="p">,</span>
        <span class="n">datetime_dtype</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">time_dtype</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">DefaultPandasDTypes</span><span class="o">.</span><span class="n">TIME_DTYPE</span><span class="p">,</span>
        <span class="n">timestamp_dtype</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;pandas.DataFrame&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a pandas DataFrame from a QueryJob</span>

<span class="sd">        Args:</span>
<span class="sd">            bqstorage_client (Optional[google.cloud.bigquery_storage_v1.BigQueryReadClient]):</span>
<span class="sd">                A BigQuery Storage API client. If supplied, use the faster</span>
<span class="sd">                BigQuery Storage API to fetch rows from BigQuery. This</span>
<span class="sd">                API is a billable API.</span>

<span class="sd">                This method requires the ``fastavro`` and</span>
<span class="sd">                ``google-cloud-bigquery-storage`` libraries.</span>

<span class="sd">                Reading from a specific partition or snapshot is not</span>
<span class="sd">                currently supported by this method.</span>

<span class="sd">            dtypes (Optional[Map[str, Union[str, pandas.Series.dtype]]]):</span>
<span class="sd">                A dictionary of column names pandas ``dtype``s. The provided</span>
<span class="sd">                ``dtype`` is used when constructing the series for the column</span>
<span class="sd">                specified. Otherwise, the default pandas behavior is used.</span>

<span class="sd">            progress_bar_type (Optional[str]):</span>
<span class="sd">                If set, use the `tqdm &lt;https://tqdm.github.io/&gt;`_ library to</span>
<span class="sd">                display a progress bar while the data downloads. Install the</span>
<span class="sd">                ``tqdm`` package to use this feature.</span>

<span class="sd">                See</span>
<span class="sd">                :func:`~google.cloud.bigquery.table.RowIterator.to_dataframe`</span>
<span class="sd">                for details.</span>

<span class="sd">                .. versionadded:: 1.11.0</span>
<span class="sd">            create_bqstorage_client (Optional[bool]):</span>
<span class="sd">                If ``True`` (default), create a BigQuery Storage API client</span>
<span class="sd">                using the default API settings. The BigQuery Storage API</span>
<span class="sd">                is a faster way to fetch rows from BigQuery. See the</span>
<span class="sd">                ``bqstorage_client`` parameter for more information.</span>

<span class="sd">                This argument does nothing if ``bqstorage_client`` is supplied.</span>

<span class="sd">                .. versionadded:: 1.24.0</span>

<span class="sd">            max_results (Optional[int]):</span>
<span class="sd">                Maximum number of rows to include in the result. No limit by default.</span>

<span class="sd">                .. versionadded:: 2.21.0</span>

<span class="sd">            geography_as_object (Optional[bool]):</span>
<span class="sd">                If ``True``, convert GEOGRAPHY data to :mod:`shapely`</span>
<span class="sd">                geometry objects.  If ``False`` (default), don&#39;t cast</span>
<span class="sd">                geography data to :mod:`shapely` geometry objects.</span>

<span class="sd">                .. versionadded:: 2.24.0</span>

<span class="sd">            bool_dtype (Optional[pandas.Series.dtype, None]):</span>
<span class="sd">                If set, indicate a pandas ExtensionDtype (e.g. ``pandas.BooleanDtype()``)</span>
<span class="sd">                to convert BigQuery Boolean type, instead of relying on the default</span>
<span class="sd">                ``pandas.BooleanDtype()``. If you explicitly set the value to ``None``,</span>
<span class="sd">                then the data type will be ``numpy.dtype(&quot;bool&quot;)``. BigQuery Boolean</span>
<span class="sd">                type can be found at:</span>
<span class="sd">                https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#boolean_type</span>

<span class="sd">                .. versionadded:: 3.8.0</span>

<span class="sd">            int_dtype (Optional[pandas.Series.dtype, None]):</span>
<span class="sd">                If set, indicate a pandas ExtensionDtype (e.g. ``pandas.Int64Dtype()``)</span>
<span class="sd">                to convert BigQuery Integer types, instead of relying on the default</span>
<span class="sd">                ``pandas.Int64Dtype()``. If you explicitly set the value to ``None``,</span>
<span class="sd">                then the data type will be ``numpy.dtype(&quot;int64&quot;)``. A list of BigQuery</span>
<span class="sd">                Integer types can be found at:</span>
<span class="sd">                https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#integer_types</span>

<span class="sd">                .. versionadded:: 3.8.0</span>

<span class="sd">            float_dtype (Optional[pandas.Series.dtype, None]):</span>
<span class="sd">                If set, indicate a pandas ExtensionDtype (e.g. ``pandas.Float32Dtype()``)</span>
<span class="sd">                to convert BigQuery Float type, instead of relying on the default</span>
<span class="sd">                ``numpy.dtype(&quot;float64&quot;)``. If you explicitly set the value to ``None``,</span>
<span class="sd">                then the data type will be ``numpy.dtype(&quot;float64&quot;)``. BigQuery Float</span>
<span class="sd">                type can be found at:</span>
<span class="sd">                https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#floating_point_types</span>

<span class="sd">                .. versionadded:: 3.8.0</span>

<span class="sd">            string_dtype (Optional[pandas.Series.dtype, None]):</span>
<span class="sd">                If set, indicate a pandas ExtensionDtype (e.g. ``pandas.StringDtype()``) to</span>
<span class="sd">                convert BigQuery String type, instead of relying on the default</span>
<span class="sd">                ``numpy.dtype(&quot;object&quot;)``. If you explicitly set the value to ``None``,</span>
<span class="sd">                then the data type will be ``numpy.dtype(&quot;object&quot;)``. BigQuery String</span>
<span class="sd">                type can be found at:</span>
<span class="sd">                https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#string_type</span>

<span class="sd">                .. versionadded:: 3.8.0</span>

<span class="sd">            date_dtype (Optional[pandas.Series.dtype, None]):</span>
<span class="sd">                If set, indicate a pandas ExtensionDtype (e.g.</span>
<span class="sd">                ``pandas.ArrowDtype(pyarrow.date32())``) to convert BigQuery Date</span>
<span class="sd">                type, instead of relying on the default ``db_dtypes.DateDtype()``.</span>
<span class="sd">                If you explicitly set the value to ``None``, then the data type will be</span>
<span class="sd">                ``numpy.dtype(&quot;datetime64[ns]&quot;)`` or ``object`` if out of bound. BigQuery</span>
<span class="sd">                Date type can be found at:</span>
<span class="sd">                https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#date_type</span>

<span class="sd">                .. versionadded:: 3.10.0</span>

<span class="sd">            datetime_dtype (Optional[pandas.Series.dtype, None]):</span>
<span class="sd">                If set, indicate a pandas ExtensionDtype (e.g.</span>
<span class="sd">                ``pandas.ArrowDtype(pyarrow.timestamp(&quot;us&quot;))``) to convert BigQuery Datetime</span>
<span class="sd">                type, instead of relying on the default ``numpy.dtype(&quot;datetime64[ns]``.</span>
<span class="sd">                If you explicitly set the value to ``None``, then the data type will be</span>
<span class="sd">                ``numpy.dtype(&quot;datetime64[ns]&quot;)`` or ``object`` if out of bound. BigQuery</span>
<span class="sd">                Datetime type can be found at:</span>
<span class="sd">                https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#datetime_type</span>

<span class="sd">                .. versionadded:: 3.10.0</span>

<span class="sd">            time_dtype (Optional[pandas.Series.dtype, None]):</span>
<span class="sd">                If set, indicate a pandas ExtensionDtype (e.g.</span>
<span class="sd">                ``pandas.ArrowDtype(pyarrow.time64(&quot;us&quot;))``) to convert BigQuery Time</span>
<span class="sd">                type, instead of relying on the default ``db_dtypes.TimeDtype()``.</span>
<span class="sd">                If you explicitly set the value to ``None``, then the data type will be</span>
<span class="sd">                ``numpy.dtype(&quot;object&quot;)``. BigQuery Time type can be found at:</span>
<span class="sd">                https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#time_type</span>

<span class="sd">                .. versionadded:: 3.10.0</span>

<span class="sd">            timestamp_dtype (Optional[pandas.Series.dtype, None]):</span>
<span class="sd">                If set, indicate a pandas ExtensionDtype (e.g.</span>
<span class="sd">                ``pandas.ArrowDtype(pyarrow.timestamp(&quot;us&quot;, tz=&quot;UTC&quot;))``) to convert BigQuery Timestamp</span>
<span class="sd">                type, instead of relying on the default ``numpy.dtype(&quot;datetime64[ns, UTC]&quot;)``.</span>
<span class="sd">                If you explicitly set the value to ``None``, then the data type will be</span>
<span class="sd">                ``numpy.dtype(&quot;datetime64[ns, UTC]&quot;)`` or ``object`` if out of bound. BigQuery</span>
<span class="sd">                Datetime type can be found at:</span>
<span class="sd">                https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#timestamp_type</span>

<span class="sd">                .. versionadded:: 3.10.0</span>

<span class="sd">        Returns:</span>
<span class="sd">            pandas.DataFrame:</span>
<span class="sd">                A :class:`~pandas.DataFrame` populated with row data</span>
<span class="sd">                and column headers from the query results. The column</span>
<span class="sd">                headers are derived from the destination table&#39;s</span>
<span class="sd">                schema.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the :mod:`pandas` library cannot be imported, or</span>
<span class="sd">                the :mod:`google.cloud.bigquery_storage_v1` module is</span>
<span class="sd">                required but cannot be imported.  Also if</span>
<span class="sd">                `geography_as_object` is `True`, but the</span>
<span class="sd">                :mod:`shapely` library cannot be imported.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query_result</span> <span class="o">=</span> <span class="n">wait_for_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_bar_type</span><span class="p">,</span> <span class="n">max_results</span><span class="o">=</span><span class="n">max_results</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">query_result</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">(</span>
            <span class="n">bqstorage_client</span><span class="o">=</span><span class="n">bqstorage_client</span><span class="p">,</span>
            <span class="n">dtypes</span><span class="o">=</span><span class="n">dtypes</span><span class="p">,</span>
            <span class="n">progress_bar_type</span><span class="o">=</span><span class="n">progress_bar_type</span><span class="p">,</span>
            <span class="n">create_bqstorage_client</span><span class="o">=</span><span class="n">create_bqstorage_client</span><span class="p">,</span>
            <span class="n">geography_as_object</span><span class="o">=</span><span class="n">geography_as_object</span><span class="p">,</span>
            <span class="n">bool_dtype</span><span class="o">=</span><span class="n">bool_dtype</span><span class="p">,</span>
            <span class="n">int_dtype</span><span class="o">=</span><span class="n">int_dtype</span><span class="p">,</span>
            <span class="n">float_dtype</span><span class="o">=</span><span class="n">float_dtype</span><span class="p">,</span>
            <span class="n">string_dtype</span><span class="o">=</span><span class="n">string_dtype</span><span class="p">,</span>
            <span class="n">date_dtype</span><span class="o">=</span><span class="n">date_dtype</span><span class="p">,</span>
            <span class="n">datetime_dtype</span><span class="o">=</span><span class="n">datetime_dtype</span><span class="p">,</span>
            <span class="n">time_dtype</span><span class="o">=</span><span class="n">time_dtype</span><span class="p">,</span>
            <span class="n">timestamp_dtype</span><span class="o">=</span><span class="n">timestamp_dtype</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># If changing the signature of this method, make sure to apply the same</span>
    <span class="c1"># changes to table.RowIterator.to_dataframe(), except for the max_results parameter</span>
    <span class="c1"># that should only exist here in the QueryJob method.</span>
    <span class="k">def</span> <span class="nf">to_geodataframe</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">bqstorage_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;bigquery_storage.BigQueryReadClient&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dtypes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">progress_bar_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">create_bqstorage_client</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">max_results</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geography_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;geopandas.GeoDataFrame&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a GeoPandas GeoDataFrame from a QueryJob</span>

<span class="sd">        Args:</span>
<span class="sd">            bqstorage_client (Optional[google.cloud.bigquery_storage_v1.BigQueryReadClient]):</span>
<span class="sd">                A BigQuery Storage API client. If supplied, use the faster</span>
<span class="sd">                BigQuery Storage API to fetch rows from BigQuery. This</span>
<span class="sd">                API is a billable API.</span>

<span class="sd">                This method requires the ``fastavro`` and</span>
<span class="sd">                ``google-cloud-bigquery-storage`` libraries.</span>

<span class="sd">                Reading from a specific partition or snapshot is not</span>
<span class="sd">                currently supported by this method.</span>

<span class="sd">            dtypes (Optional[Map[str, Union[str, pandas.Series.dtype]]]):</span>
<span class="sd">                A dictionary of column names pandas ``dtype``s. The provided</span>
<span class="sd">                ``dtype`` is used when constructing the series for the column</span>
<span class="sd">                specified. Otherwise, the default pandas behavior is used.</span>

<span class="sd">            progress_bar_type (Optional[str]):</span>
<span class="sd">                If set, use the `tqdm &lt;https://tqdm.github.io/&gt;`_ library to</span>
<span class="sd">                display a progress bar while the data downloads. Install the</span>
<span class="sd">                ``tqdm`` package to use this feature.</span>

<span class="sd">                See</span>
<span class="sd">                :func:`~google.cloud.bigquery.table.RowIterator.to_dataframe`</span>
<span class="sd">                for details.</span>

<span class="sd">                .. versionadded:: 1.11.0</span>
<span class="sd">            create_bqstorage_client (Optional[bool]):</span>
<span class="sd">                If ``True`` (default), create a BigQuery Storage API client</span>
<span class="sd">                using the default API settings. The BigQuery Storage API</span>
<span class="sd">                is a faster way to fetch rows from BigQuery. See the</span>
<span class="sd">                ``bqstorage_client`` parameter for more information.</span>

<span class="sd">                This argument does nothing if ``bqstorage_client`` is supplied.</span>

<span class="sd">                .. versionadded:: 1.24.0</span>

<span class="sd">            max_results (Optional[int]):</span>
<span class="sd">                Maximum number of rows to include in the result. No limit by default.</span>

<span class="sd">                .. versionadded:: 2.21.0</span>

<span class="sd">            geography_column (Optional[str]):</span>
<span class="sd">                If there are more than one GEOGRAPHY column,</span>
<span class="sd">                identifies which one to use to construct a GeoPandas</span>
<span class="sd">                GeoDataFrame.  This option can be ommitted if there&#39;s</span>
<span class="sd">                only one GEOGRAPHY column.</span>

<span class="sd">        Returns:</span>
<span class="sd">            geopandas.GeoDataFrame:</span>
<span class="sd">                A :class:`geopandas.GeoDataFrame` populated with row</span>
<span class="sd">                data and column headers from the query results. The</span>
<span class="sd">                column headers are derived from the destination</span>
<span class="sd">                table&#39;s schema.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">               If the :mod:`geopandas` library cannot be imported, or the</span>
<span class="sd">                :mod:`google.cloud.bigquery_storage_v1` module is</span>
<span class="sd">                required but cannot be imported.</span>

<span class="sd">        .. versionadded:: 2.24.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query_result</span> <span class="o">=</span> <span class="n">wait_for_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_bar_type</span><span class="p">,</span> <span class="n">max_results</span><span class="o">=</span><span class="n">max_results</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">query_result</span><span class="o">.</span><span class="n">to_geodataframe</span><span class="p">(</span>
            <span class="n">bqstorage_client</span><span class="o">=</span><span class="n">bqstorage_client</span><span class="p">,</span>
            <span class="n">dtypes</span><span class="o">=</span><span class="n">dtypes</span><span class="p">,</span>
            <span class="n">progress_bar_type</span><span class="o">=</span><span class="n">progress_bar_type</span><span class="p">,</span>
            <span class="n">create_bqstorage_client</span><span class="o">=</span><span class="n">create_bqstorage_client</span><span class="p">,</span>
            <span class="n">geography_column</span><span class="o">=</span><span class="n">geography_column</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>


<span class="k">class</span> <span class="nc">QueryPlanEntryStep</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Map a single step in a query plan entry.</span>

<span class="sd">    Args:</span>
<span class="sd">        kind (str): step type.</span>
<span class="sd">        substeps (List): names of substeps.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span> <span class="n">substeps</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kind</span> <span class="o">=</span> <span class="n">kind</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">substeps</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">substeps</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_api_repr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QueryPlanEntryStep&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Factory: construct instance from the JSON repr.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource (Dict): JSON representation of the entry.</span>

<span class="sd">        Returns:</span>
<span class="sd">            google.cloud.bigquery.job.QueryPlanEntryStep:</span>
<span class="sd">                New instance built from the resource.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="n">resource</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;kind&quot;</span><span class="p">),</span> <span class="n">substeps</span><span class="o">=</span><span class="n">resource</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;substeps&quot;</span><span class="p">,</span> <span class="p">()))</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">kind</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">kind</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">substeps</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">substeps</span>


<span class="k">class</span> <span class="nc">QueryPlanEntry</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;QueryPlanEntry represents a single stage of a query execution plan.</span>

<span class="sd">    See</span>
<span class="sd">    https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#ExplainQueryStage</span>
<span class="sd">    for the underlying API representation within query statistics.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_api_repr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">resource</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QueryPlanEntry&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Factory: construct instance from the JSON repr.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource(Dict[str: object]):</span>
<span class="sd">                ExplainQueryStage representation returned from API.</span>

<span class="sd">        Returns:</span>
<span class="sd">            google.cloud.bigquery.job.QueryPlanEntry:</span>
<span class="sd">                Query plan entry parsed from ``resource``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="n">entry</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="n">resource</span>
        <span class="k">return</span> <span class="n">entry</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[str]: Human-readable name of the stage.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">entry_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[str]: Unique ID for the stage within the plan.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[Datetime]: Datetime when the stage started.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;startMs&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_datetime_from_microseconds</span><span class="p">(</span>
            <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;startMs&quot;</span><span class="p">))</span> <span class="o">*</span> <span class="mf">1000.0</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[Datetime]: Datetime when the stage ended.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;endMs&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_datetime_from_microseconds</span><span class="p">(</span>
            <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;endMs&quot;</span><span class="p">))</span> <span class="o">*</span> <span class="mf">1000.0</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">input_stages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List(int): Entry IDs for stages that were inputs for this stage.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;inputStages&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;inputStages&quot;</span><span class="p">)</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">parallel_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Number of parallel input segments within</span>
<span class="sd">        the stage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;parallelInputs&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">completed_parallel_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Number of parallel input segments completed.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;completedParallelInputs&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">wait_ms_avg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Milliseconds the average worker spent waiting to</span>
<span class="sd">        be scheduled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;waitMsAvg&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">wait_ms_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Milliseconds the slowest worker spent waiting to</span>
<span class="sd">        be scheduled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;waitMsMax&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">wait_ratio_avg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[float]: Ratio of time the average worker spent waiting</span>
<span class="sd">        to be scheduled, relative to the longest time spent by any worker in</span>
<span class="sd">        any stage of the overall plan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;waitRatioAvg&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">wait_ratio_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[float]: Ratio of time the slowest worker spent waiting</span>
<span class="sd">        to be scheduled, relative to the longest time spent by any worker in</span>
<span class="sd">        any stage of the overall plan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;waitRatioMax&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">read_ms_avg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Milliseconds the average worker spent reading</span>
<span class="sd">        input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;readMsAvg&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">read_ms_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Milliseconds the slowest worker spent reading</span>
<span class="sd">        input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;readMsMax&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">read_ratio_avg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[float]: Ratio of time the average worker spent reading</span>
<span class="sd">        input, relative to the longest time spent by any worker in any stage</span>
<span class="sd">        of the overall plan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;readRatioAvg&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">read_ratio_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[float]: Ratio of time the slowest worker spent reading</span>
<span class="sd">        to be scheduled, relative to the longest time spent by any worker in</span>
<span class="sd">        any stage of the overall plan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;readRatioMax&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">compute_ms_avg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Milliseconds the average worker spent on CPU-bound</span>
<span class="sd">        processing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;computeMsAvg&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">compute_ms_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Milliseconds the slowest worker spent on CPU-bound</span>
<span class="sd">        processing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;computeMsMax&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">compute_ratio_avg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[float]: Ratio of time the average worker spent on</span>
<span class="sd">        CPU-bound processing, relative to the longest time spent by any</span>
<span class="sd">        worker in any stage of the overall plan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;computeRatioAvg&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">compute_ratio_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[float]: Ratio of time the slowest worker spent on</span>
<span class="sd">        CPU-bound processing, relative to the longest time spent by any</span>
<span class="sd">        worker in any stage of the overall plan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;computeRatioMax&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">write_ms_avg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Milliseconds the average worker spent writing</span>
<span class="sd">        output data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;writeMsAvg&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">write_ms_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Milliseconds the slowest worker spent writing</span>
<span class="sd">        output data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;writeMsMax&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">write_ratio_avg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[float]: Ratio of time the average worker spent writing</span>
<span class="sd">        output data, relative to the longest time spent by any worker in any</span>
<span class="sd">        stage of the overall plan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;writeRatioAvg&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">write_ratio_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[float]: Ratio of time the slowest worker spent writing</span>
<span class="sd">        output data, relative to the longest time spent by any worker in any</span>
<span class="sd">        stage of the overall plan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;writeRatioMax&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">records_read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Number of records read by this stage.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;recordsRead&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">records_written</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Number of records written by this stage.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;recordsWritten&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[str]: status of this stage.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">shuffle_output_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Number of bytes written by this stage to</span>
<span class="sd">        intermediate shuffle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;shuffleOutputBytes&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">shuffle_output_bytes_spilled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Number of bytes written by this stage to</span>
<span class="sd">        intermediate shuffle and spilled to disk.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;shuffleOutputBytesSpilled&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List(QueryPlanEntryStep): List of step operations performed by</span>
<span class="sd">        each worker in the stage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">QueryPlanEntryStep</span><span class="o">.</span><span class="n">from_api_repr</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;steps&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">]</span>


<span class="k">class</span> <span class="nc">TimelineEntry</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;TimelineEntry represents progress of a query job at a particular</span>
<span class="sd">    point in time.</span>

<span class="sd">    See</span>
<span class="sd">    https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#querytimelinesample</span>
<span class="sd">    for the underlying API representation within query statistics.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_api_repr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">resource</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Factory: construct instance from the JSON repr.</span>

<span class="sd">        Args:</span>
<span class="sd">            resource(Dict[str: object]):</span>
<span class="sd">                QueryTimelineSample representation returned from API.</span>

<span class="sd">        Returns:</span>
<span class="sd">            google.cloud.bigquery.TimelineEntry:</span>
<span class="sd">                Timeline sample parsed from ``resource``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="n">entry</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="n">resource</span>
        <span class="k">return</span> <span class="n">entry</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">elapsed_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Milliseconds elapsed since start of query</span>
<span class="sd">        execution.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;elapsedMs&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">active_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Current number of input units being processed</span>
<span class="sd">        by workers, reported as largest value since the last sample.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;activeUnits&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pending_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Current number of input units remaining for</span>
<span class="sd">        query stages active at this sample time.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pendingUnits&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">completed_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Current number of input units completed by</span>
<span class="sd">        this query.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;completedUnits&quot;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">slot_millis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optional[int]: Cumulative slot-milliseconds consumed by</span>
<span class="sd">        this query.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_helpers</span><span class="o">.</span><span class="n">_int_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;totalSlotMs&quot;</span><span class="p">))</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Lin-jun-xiang.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>